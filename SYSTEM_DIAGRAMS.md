# ğŸ¯ SystÃ¨me de Notifications - Diagramme Visuel

## 1ï¸âƒ£ FLUX DE CRÃ‰ATION DE NOTIFICATION (Nouvel Utilisateur)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN DASHBOARD (Frontend)                     â”‚
â”‚                                                                   â”‚
â”‚  1. Admin clique "Nouvel utilisateur"                            â”‚
â”‚  2. Remplit formulaire (avec MOT DE PASSE)                       â”‚
â”‚  3. Clique "CrÃ©er"                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                 POST /api/admin/users
                 {prenom, nom, email, ..., password}
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND SERVER (Node/Express)                  â”‚
â”‚                                                                   â”‚
â”‚  1. ReÃ§oit les donnÃ©es                                           â”‚
â”‚  2. Valide les champs obligatoires                               â”‚
â”‚  3. Hash le mot de passe avec bcrypt                             â”‚
â”‚  4. InsÃ¨re l'utilisateur en BD                                   â”‚
â”‚  5. â­ CRÃ‰E UNE NOTIFICATION â­                                 â”‚
â”‚     â”œâ”€ type: 'new_user'                                         â”‚
â”‚     â”œâ”€ title: 'Nouvel utilisateur Commercial'                   â”‚
â”‚     â”œâ”€ message: 'Nouvel utilisateur Commercial...'              â”‚
â”‚     â”œâ”€ reference_id: 42 (ID utilisateur)                        â”‚
â”‚     â”œâ”€ reference_type: 'user'                                   â”‚
â”‚     â””â”€ action_url: '/utilisateurs?user=42'                      â”‚
â”‚                                                                   â”‚
â”‚  6. Retourne: {success, user:{...}}                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
            InsÃ¨re notification pour chaque admin
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BASE DE DONNÃ‰ES (PostgreSQL)                     â”‚
â”‚                                                                   â”‚
â”‚  ğŸ“Š users table:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ id â”‚ nom    â”‚ email   â”‚ password   â”‚                          â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚  â”‚... â”‚ Dupont â”‚ ...     â”‚ $2b$10... â”‚  âœ… CrÃ©Ã© & HashÃ©        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                   â”‚
â”‚  ğŸ“¬ notifications table:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚idâ”‚admin_idâ”‚type      â”‚titleâ”‚messageâ”‚is_readâ”‚                â”‚
â”‚  â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚  â”‚1 â”‚ 1      â”‚new_user  â”‚...  â”‚...    â”‚false   â”‚  âœ… CrÃ©Ã©e     â”‚
â”‚  â”‚2 â”‚ 2      â”‚new_user  â”‚...  â”‚...    â”‚false   â”‚  âœ… CrÃ©Ã©e     â”‚
â”‚  â”‚3 â”‚ 3      â”‚new_user  â”‚...  â”‚...    â”‚false   â”‚  âœ… CrÃ©Ã©e     â”‚
â”‚  â”‚..â”‚...     â”‚...       â”‚...  â”‚...    â”‚...     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
            GET /api/admin/notifications
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN DASHBOARD (Frontend)                     â”‚
â”‚                                                                   â”‚
â”‚  âœ… Notification Bell Updates:                                  â”‚
â”‚                                                                   â”‚
â”‚     ğŸ”” Header                                                    â”‚
â”‚     â”œâ”€ Badge: "1" (unread count)                                â”‚
â”‚     â”œâ”€ Color: RED background                                    â”‚
â”‚     â””â”€ Dropdown shows:                                          â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚ ğŸ”µ Nouvel utilisateur       â”‚                         â”‚
â”‚        â”‚ Marie Dupont (marie@...)     â”‚                         â”‚
â”‚        â”‚ 2025-01-09 14:30             â”‚                         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                   â”‚
â”‚  Admin clique notification â†’ PUT /notifications/1/mark-read      â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2ï¸âƒ£ ARCHITECTURE DES NOTIFICATIONS

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   NOTIFICATION TRIGGERS     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ POST /users â”‚      â”‚ POST /subs   â”‚    â”‚ PUT /contracts â”‚
   â”‚ (New User)  â”‚      â”‚ (New Sub)    â”‚    â”‚ (Status Change)â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                  ğŸ”” CREATE NOTIFICATION
                  (for all admins)
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                 â”‚
        â–¼                                                 â–¼
   SELECT admin_id              INSERT INTO notifications
   FROM users                   (admin_id, type, title, ...)
   WHERE role='admin'           VALUES (...)
        â”‚                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
          ğŸ“¬ N notifications crÃ©Ã©es
             (une par admin)
```

## 3ï¸âƒ£ CYCLE DE VIE D'UNE NOTIFICATION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰TAPE 1: CRÃ‰ATION                                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â€¢ Event: Nouvel utilisateur crÃ©Ã©                           â”‚
â”‚ â€¢ Backend: ExÃ©cute INSERT notifications                    â”‚
â”‚ â€¢ is_read: FALSE                                           â”‚
â”‚ â€¢ created_at: NOW()                                        â”‚
â”‚ â€¢ read_at: NULL                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Notification crÃ©Ã©e en BD
                      â”‚ (is_read = FALSE)
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰TAPE 2: AFFICHAGE                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â€¢ Frontend: GET /api/admin/notifications toutes les 30s    â”‚
â”‚ â€¢ RÃ©cupÃ¨re notifications WHERE is_read = FALSE             â”‚
â”‚ â€¢ Badge affiche unread_count (ex: 3)                       â”‚
â”‚ â€¢ Dropdown affiche liste avec couleurs                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Admin voit cloche rouge
                      â”‚ avec notification
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰TAPE 3: INTERACTION                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â€¢ Admin: Clique sur notification                           â”‚
â”‚ â€¢ Frontend: PUT /notifications/1/mark-read                 â”‚
â”‚ â€¢ Backend: UPDATE notifications                            â”‚
â”‚   SET is_read = TRUE, read_at = NOW()                      â”‚
â”‚   WHERE id = 1                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Notification marquÃ©e comme lue
                      â”‚ (is_read = TRUE, read_at = NOW())
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰TAPE 4: MISE Ã€ JOUR                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â€¢ Frontend: GET /api/admin/notifications                   â”‚
â”‚ â€¢ Notification n'apparaÃ®t plus dans "unread"              â”‚
â”‚ â€¢ Badge dÃ©crÃ©mente (ex: 3 â†’ 2)                             â”‚
â”‚ â€¢ Notification retirÃ©e ou grisÃ©e dans dropdown             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4ï¸âƒ£ MODALES UTILISATEURS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LISTE UTILISATEURS                                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Nom    â”‚ Email    â”‚ RÃ´le      â”‚ Action         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Dupont â”‚ d@...    â”‚ Commercialâ”‚ ğŸ‘ï¸ âœï¸ ğŸ—‘ï¸     â”‚  â”‚
â”‚  â”‚ Martin â”‚ m@...    â”‚ Client    â”‚ ğŸ‘ï¸ âœï¸ ğŸ—‘ï¸     â”‚  â”‚
â”‚  â”‚ ...... â”‚ ..       â”‚ ..        â”‚ ..  ..  ..     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  Clique: ğŸ‘ï¸          Clique: âœï¸          Clique: ğŸ—‘ï¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                      â”‚                      â”‚
    â–¼                      â–¼                      â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODAL VER        â”‚  â”‚ MODAL MODIFIER   â”‚  â”‚ CONFIRMATION â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DÃ©tails (RO)     â”‚  â”‚ Formulaire (RW)  â”‚  â”‚ ÃŠtes-vous    â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚ sÃ»r de       â”‚
â”‚ â€¢ PrÃ©nom: Marie  â”‚  â”‚ â€¢ Prenom: [____] â”‚  â”‚ supprimer?   â”‚
â”‚ â€¢ Nom: Dupont    â”‚  â”‚ â€¢ Nom: [_______] â”‚  â”‚              â”‚
â”‚ â€¢ Email: m@...   â”‚  â”‚ â€¢ Email: [_____] â”‚  â”‚ [OUI] [NON]  â”‚
â”‚ â€¢ Tel: +225...   â”‚  â”‚ â€¢ Tel: [______]  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Adresse: ...   â”‚  â”‚ â€¢ Adresse: [___] â”‚
â”‚ â€¢ RÃ´le: Comm.    â”‚  â”‚ â€¢ RÃ´le: [dropdown]
â”‚ â€¢ CrÃ©Ã© le: ...   â”‚  â”‚                  â”‚
â”‚                  â”‚  â”‚ [Sauvegarder]    â”‚
â”‚ [Fermer]         â”‚  â”‚ [Annuler]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VOIR: Read-Only        MODIFIER: Editable      SUPPRIMER: Confirm
âˆŸ Affiche             âˆŸ Permet Ã©dition        âˆŸ Demande confirmation
  tous les champs       de certains champs      avant suppression
```

## 5ï¸âƒ£ TYPES DE NOTIFICATIONS & COULEURS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TYPES DE NOTIFICATIONS                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸ”µ new_user                    â†’ BLEU                    â”‚
â”‚     Nouvel utilisateur/admin/commercial crÃ©Ã©              â”‚
â”‚     Message: "Nouvel utilisateur ... enregistrÃ©"          â”‚
â”‚                                                            â”‚
â”‚  ğŸŸ¢ new_subscription            â†’ VERT                    â”‚
â”‚     Nouvelle souscription crÃ©Ã©e                           â”‚
â”‚     Message: "Nouvelle souscription ... pour ..."         â”‚
â”‚                                                            â”‚
â”‚  ğŸŸ£ contract_update             â†’ VIOLET                  â”‚
â”‚     Changement de statut de contrat                       â”‚
â”‚     Message: "Contrat ... changÃ© en ..."                  â”‚
â”‚     (PrÃªt Ã  implÃ©menter)                                  â”‚
â”‚                                                            â”‚
â”‚  ğŸŸ¡ commercial_action           â†’ JAUNE                   â”‚
â”‚     Action commerciale (commission, etc.)                 â”‚
â”‚     Message: "Commercial ... a ..."                       â”‚
â”‚     (PrÃªt Ã  implÃ©menter)                                  â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6ï¸âƒ£ CLOCHE ET DROPDOWN

```
Ã‰TAT 0: Aucune notification          Ã‰TAT 1: 1+ notifications non lues
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ””                 â”‚              â”‚  ğŸ””                 â”‚
â”‚  (gris)             â”‚              â”‚  (bleu)             â”‚
â”‚                     â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”            â”‚
â”‚                     â”‚              â”‚  â”‚ 1   â”‚  Badge      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â””â”€â”€â”€â”€â”€â”˜  (rouge)   â”‚
   Cliquer â†’ Rien                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        Cliquer â†’ Dropdown

DROPDOWN MENU:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notifications                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ ğŸ”µ Nouvel utilisateur             â”‚  ColorÃ© par type
â”‚    Marie Dupont (marie@...)         â”‚  Haut: 10 plus rÃ©centes
â”‚    09-01-2025 14:30                 â”‚  
â”‚                                     â”‚
â”‚ ğŸ”µ Nouvel utilisateur             â”‚  Clique pour
â”‚    Jean Martin (jean@...)           â”‚  marquer comme lue
â”‚    09-01-2025 14:15                 â”‚
â”‚                                     â”‚
â”‚ ğŸŸ¢ Nouvelle souscription           â”‚  Si 0: "Aucune
â”‚    Serenite - Marie D.              â”‚  notification"
â”‚    09-01-2025 13:45                 â”‚
â”‚                                     â”‚
â”‚   ... (max 10 notifications)        â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7ï¸âƒ£ SÃ‰CURITÃ‰ DU MOT DE PASSE

```
Ã‰TAPE 1: Frontend
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Admin entre: "MyPassword123!"
              â”‚
              â–¼
         [input password]
         
Ã‰TAPE 2: Envoi au Backend
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
POST /api/admin/users
{
  prenom: "Marie",
  nom: "Dupont",
  email: "marie@...",
  password: "MyPassword123!"  â† Non hashÃ© (c'est OK, HTTPS)
}

Ã‰TAPE 3: Backend (RÃ©ception)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
const password = "MyPassword123!"
         â”‚
         â–¼ bcrypt.hash(password, 10)
         â”‚
         â–¼
     $2b$10$abcd... (60 caractÃ¨res)
              â”‚
              â–¼ StockÃ© en BD JAMAIS visible

Ã‰TAPE 4: BD Storage
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
users table:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ email  â”‚ password         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ marie@ â”‚ $2b$10$abcd...   â”‚  âœ… SÃ©curisÃ©
â”‚        â”‚ (hachÃ©/cryptÃ©)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰TAPE 5: RÃ©ponse API
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  success: true,
  user: {
    id: 123,
    email: "marie@...",
    nom: "Dupont",
    // âš ï¸ PAS de password ici!
  }
}
```

---

**Ces diagrammes illustrent le flux complet de:**
- âœ… CrÃ©ation d'utilisateurs avec mot de passe sÃ©curisÃ©
- âœ… CrÃ©ation automatique de notifications
- âœ… Affichage des notifications dans la cloche
- âœ… Modales Voir/Modifier/Supprimer
- âœ… Types de notifications colorÃ©es

